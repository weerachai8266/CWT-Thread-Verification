(window["webpackJsonp-ae-fe/cosmos-1"]=window["webpackJsonp-ae-fe/cosmos-1"]||[]).push([[36],{1250:function(e,n,t){"use strict";t.r(n);var o=t(4),i=t.n(o),r=t(0),a=t.n(r),p=t(2),c=t.n(p),s=t(7),l=t(6),u=t(36);var d=function(){var e,n,t;return n=null===(e=window)||void 0===e?void 0:e._pop_service_percent_,(t=s.a.get("xman_us_f","acs_rt")||"")&&n&&!(n<=0)&&(n>=1||parseInt(t.slice(t.length-2,t.length),16)/256<=n)?"us":"cn"},y=function(){var e=a()(c.a.mark((function e(n,t,o){var i,r,a,p,y,g,_,f,v,m,b,x,w;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t="pc"),!o){e.next=1;break}return e.abrupt("return",new Promise((function(e,n){e({data:{popLayerRuleMap:null==o?void 0:o.popLayerRuleMap}})})));case 1:return y=s.a.get("aep_usuc_f","b_locale"),g=s.a.getRegion(),_=y&&(null==y||null===(i=y.split("_"))||void 0===i?void 0:i[0])+"_"+g,f=s.a.getCurrency(),v=s.a.get("xman_us_f","acs_rt"),m=s.a.get("xman_us_f","x_as_i"),_="en_CN"===_?"en_US":_,b=l.util.awsc,e.next=2,b.init();case 2:return e.next=3,b.getUA();case 3:return x=e.sent,e.next=4,b.getUmidToken();case 4:return w=e.sent,window.fyOBJ=void 0,window.AWSC.configFYEx((function(e){window.fyOBJ=e}),{location:d()||"cn",MaxMTLog:5,MaxKSLog:5,MaxFocusLog:5,MaxNGPLog:5},3e3),e.abrupt("return",u.a.request({type:"POST",api:"mtop.aliexpress.usertouch.poplayer.get",v:"2.0",appKey:"24815441",data:{_currency:f,_lang:_,clientType:t,positionSign:n,ua:x,umidToken:w,ext:JSON.stringify({pullTrafficRuleParam:{originalUrl:null===(r=window)||void 0===r||null===(a=r.location)||void 0===a?void 0:a.href,appAffiParameters:decodeURIComponent(m||"")||"",acsRt:v,referUrl:null===(p=document)||void 0===p?void 0:p.referrer}})}}));case 5:case"end":return e.stop()}}),e)})));return function(n,t,o){return e.apply(this,arguments)}}(),g=t(360),_=t(505),f=t(245),v=t(1213),m=function(){return"postMessage"in window};function b(e,n,t){var o=document.createElement("iframe");return o.src=Object(_.b)(e,{__poplayer_preserve_uuid:n,__prefix:f.b.__prefix||"",__poplayer_position_sign:t}),o.name=n,o.style.width="100%",o.style.height="100%",o.style.border="none",o.style.display="none",o.style.position="fixed",o.style.zIndex="-100",o.style.left="0",o.style.top="0",o.style.transform="translate3d(0, 0, -100)",document.body.appendChild(o),o}function x(){return(x=a()(c.a.mark((function e(n,t){var o,r,p,s,l,u,d,x,w,S,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=Object(_.g)()?"a2g0n":"a2g0o",s=Object(_.g)()?"msite":"pc",Object(g.d)(),l=document.body.getAttribute("data-spm")||"0",Object(_.h)(((o={log_key:"/ae.pc_ctr.statweb_ae_ctr"})["spm-cnt"]=p+"."+l+".poplayer.trigger",o.type="expose",o.positionSign=n.positionSign,o.exp_page=n.positionSign,o.exp_type="poplayer",o.clientType=s,o)),e.next=1,y(n.positionSign,s,t);case 1:if(u=e.sent,d=null==u||null===(r=u.data)||void 0===r?void 0:r.popLayerRuleMap,x=Object.keys(d).reduce((function(e,n){var t;return i()({},e,((t={})[n]=JSON.parse(d[n]),t))}),{}),w=Object(g.b)(x),Object(g.a)({type:"add",payload:w}),S=new _.a(w,x),(h=S.urlWhiteList().fatigue().priority().popType().layer().getPopIds()).length){e.next=2;break}return e.abrupt("return");case 2:h.forEach(function(){var e=a()(c.a.mark((function e(t){var o,i,r,a,u,d,y,g,w,S,h,k,O,j,T,M,U,C,L,R,I,P,B,J,A,N;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g=null===(o=x[t])||void 0===o||null===(i=o.params)||void 0===i?void 0:i.extGcpOutputPageUrl,w=null===(r=x[t])||void 0===r||null===(a=r.params)||void 0===a?void 0:a.jsComboUrl,S=null===(u=x[t])||void 0===u?void 0:u.type,h=null===(d=x[t])||void 0===d||null===(y=d.params)||void 0===y?void 0:y.type,"placeholder"===S&&"emptyContent"===h&&Object(_.h)(((j={log_key:"/ae.pc_ctr.statweb_ae_ctr"})["spm-cnt"]=p+"."+l+".poplayer.openurl",j.type="expose",j.positionSign=n.positionSign,j.houyiTrack=Object(_.i)(null===(k=x[t])||void 0===k||null===(O=k.params)||void 0===O?void 0:O.track),j.exp_page=g,j.exp_type="poplayer",j.clientType=s,j)),!g||!m()){e.next=2;break}if(Object(_.h)(((U={log_key:"/ae.pc_ctr.statweb_ae_ctr"})["spm-cnt"]=p+"."+l+".poplayer.openurl",U.type="expose",U.positionSign=n.positionSign,U.houyiTrack=Object(_.i)(null===(T=x[t])||void 0===T||null===(M=T.params)||void 0===M?void 0:M.track),U.exp_page=g,U.exp_type="poplayer",U.clientType=s,U)),"poplayer-campaign-pc",!w||"poplayer-campaign-pc"===n.positionSign){e.next=1;break}return Object(v.renderModuleAndBindMessage)({positionSign:n.positionSign,popInfo:x[t],track:null===(I=x[t])||void 0===I||null===(P=I.params)||void 0===P?void 0:P.track,parentSpmB:l}),e.abrupt("return");case 1:B=f.c.prod,J=Object(_.b)(B,{parentSpmB:l,jsUrl:encodeURIComponent(Object(_.c)(w))}),A=b(J,t,n.positionSign),(N=A.contentWindow)&&(N.__poplayer_init_data={popInfo:x[t],positionSign:n.positionSign,parentSpmB:l,uuid:t,isSupportWebp:m()}),A.onerror=function(e){console.log(e)},Object(_.d)(t,A,null===(C=x[t])||void 0===C||null===(L=C.params)||void 0===L?void 0:L.track,B,n.positionSign,l,!1,null===(R=x[t])||void 0===R?void 0:R.uuid);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.default=function(e,n){return x.apply(this,arguments)}}}]);